/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[16],{330:function(Ea,va,ba){function oa(a,w,aa){w.endsWith("/")||(w+="/");aa=aa||{};var ia=aa.disableWebsockets||!1;this.NO=aa.singleServerMode||!1;null!=aa.customQueryParameters&&Object(h.b)("wvsQueryParameters",aa.customQueryParameters);w.endsWith("blackbox/")||(w+="blackbox/");this.$k=aa.uploadData||null;this.yt=aa.uriData||null;this.fI=aa.cacheKey||null;this.SL=aa.officeLocale||null;this.KA=Object(n.a)(w,null,ia);this.bf=w;this.$A=
a;this.Ae=null;this.Uh=ka();this.dk=ka();this.yv=!1;this.kf=this.cd=this.td=this.ie=null;this.Ge=[];this.$v=[];this.cache={};this.timeStamp=0;this.We=[];this.bg=[];this.rB=null;this.TA=!1;this.hE=this.id=null;this.UC=this.FK=ja;this.cy=0;this.lC=!1;this.a1=1;this.ix={};this.Cp(!0)}function ka(){var a={promise:null,resolve:null,reject:null,state:0,result:null,request:null,Uo:function(){return 1===(a.state&1)},$_:function(){return 2===(a.state&2)},Hg:function(){return!a.$_()&&!a.Uo()},H_:function(){return 4===
(a.state&4)},cO:function(){a.state|=4}};a.promise=new Promise(function(w,aa){a.resolve=function(){if(0===a.state||4===a.state)a.state=1,a.result=arguments[0],w.apply(null,arguments)};a.reject=function(){if(0===a.state||4===a.state)a.state=2,aa.apply(null,arguments)}});return a}function ja(){return!1}function ea(a,w,aa){if(!(w in x))return!0;w=x[w];for(var ia=0;ia<w.length;ia++){var fa=a;var ha=w[ia];var da=aa;if(ha.name in fa){var ma="",ua=!1;fa=fa[ha.name];switch(ha.type){case "s":ma="String";ua=
Object(ca.isString)(fa);break;case "a":ma="Array";ua=Object(ca.isArray)(fa);break;case "n":ma="Number";ua=Object(ca.isNumber)(fa)&&Object(ca.isFinite)(fa);break;case "o":ma="Object",ua=Object(ca.isObject)(fa)&&!Object(ca.isArray)(fa)}ua||da.reject('Expected response field "'+ha.name+'" to have type '+ma);ha=ua}else da.reject('Response missing field "'+ha.name+'"'),ha=!1;if(!ha)return!1}return!0}ba.r(va);var ca=ba(0);ba.n(ca);var y=ba(1);Ea=ba(43);var r=ba(32),n=ba(348),b=ba(67),f=ba(274),e=ba(88),
h=ba(37),z=ba(126),x={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}]};oa.prototype=Object(ca.extend)(oa.prototype,{HV:function(){var a=
this;return new Promise(function(w,aa){var ia=new XMLHttpRequest;ia.open("GET",a.bf+"ck");ia.withCredentials=a.um();ia.onreadystatechange=function(){ia.readyState===XMLHttpRequest.DONE&&(200===ia.status?w():aa())};ia.send()})},k5:function(a,w){this.FK=a||ja;this.UC=w||ja},tI:function(){var a=this;this.dk=ka();this.Uh=ka();return this.KA.hB().then(function(){a.yv=!1;a.id=null;a.TA=!1;return a.HV()})},VD:function(){this.FK();this.zC();this.ie&&(this.ie.Hg()?this.Be(this.ie.request):this.ie.Uo()&&this.UC(this.ie.result.url,
"pdf")&&(this.ie=null,this.DN()));this.kf&&this.kf.Hg()&&this.Be(this.kf.request);this.td&&this.td.Hg()?this.Be(this.td.request):this.cd&&this.cd.Hg()&&this.vK(this.cd.request);var a;for(a=0;a<this.We.length;a++)this.We[a]&&this.We[a]&&(this.We[a].Hg()?this.Be(this.We[a].request):this.We[a].Uo()&&this.UC(this.We[a].result.url,"image")&&(this.We[a]=null,this.$x(a)));for(a=0;a<this.bg.length;a++)this.bg[a]&&this.bg[a]&&this.bg[a].Hg()&&!this.bg[a].H_()&&this.Be(this.bg[a].request);for(a=0;a<this.Ge.length;a++)this.Ge[a]&&
this.Ge[a].Hg()&&this.Be(this.Ge[a].request)},zC:function(a){var w=this;this.yv||(this.timeStamp=Date.now(),this.KA.CE(function(aa){w.p1(aa)},function(){return null},function(){return null},!0).then(function(){clearInterval(w.Sx);w.Sx=null},function(aa){w.yv=!1;if(!w.Sx){var ia=0;w.TA=!0;w.hE=0;w.Sx=setInterval(function(){2>ia++?w.VD():(clearInterval(w.Sx),a&&a.reject(e.a),Object(y.f)("WebViewerServer connection failed:"+aa))},5E3)}}),this.yv=!0)},g7:function(){var a=this,w=createPromiseCapability();
if(this.$k){var aa=new FormData;aa.append("file",this.$k.fileHandle,this.$k.fileHandle.name);var ia=this.$k.loadCallback;var fa="upload";var ha=this.$k.extension}else if(this.yt){aa={uri:this.yt.uri,yca:this.yt.shareId};aa=Object.keys(aa).map(function(na){return na+"="+(aa[na]?encodeURIComponent(aa[na]):"")}).join("&");var da="application/x-www-form-urlencoded; charset=UTF-8";ia=this.yt.loadCallback;fa="url";ha=this.yt.extension}else return Promise.resolve();var ma=new XMLHttpRequest,ua=Object(r.g)(a.bf,
"AuxUpload");ua=Object(z.a)(ua)+"&type="+fa+"&ext="+ha;ma.open("POST",ua);ma.withCredentials=this.um();da&&ma.setRequestHeader("Content-Type",da);ma.addEventListener("load",function(){if(ma.readyState===ma.DONE&&200===ma.status){var na=JSON.parse(ma.response);a.$A=na.uri;ia(na);w.resolve(na)}});ma.addEventListener("error",function(){w.reject(ma.statusText+" "+JSON.stringify(ma))});this.$k&&null!=this.$k.onProgress&&(ma.upload.onprogress=function(na){a.$k.onProgress(na)});ma.send(aa);return w.promise},
b4:function(a){this.password=a||null;this.Uh.Uo()||(this.Uh=ka(),this.Be({t:"pages"}));return this.Uh.promise},Ns:function(a){this.rB=a||null;this.Uh.Uo()||(this.zC(this.Uh),this.Be({t:"pages"}));return this.Uh.promise},wI:function(a){a=Object.assign(a,{uri:encodeURIComponent(this.$A)});this.rB&&(a.ext=this.rB);this.Ae&&(a.c=this.Ae);this.password&&(a.pswd=this.password);this.fI&&(a.cacheKey=this.fI);this.SL&&(a.locale=this.SL);return a},Be:function(a){a=this.wI(a);this.KA.send(a)},Gi:function(a){return a},
p1:function(a){var w=this,aa=a.data,ia=a.err,fa=a.t;switch(fa){case "upload":ia?w.h7.reject(ia):w.h7.resolve("Success");break;case "pages":ia?w.Uh.reject(ia):ea(aa,fa,w.Uh)&&w.Uh.resolve(aa);break;case "config":ia?w.dk.reject(ia):ea(aa,fa,w.dk)&&(aa.id&&(w.id=aa.id),aa.auth&&(a=Object(h.a)("wvsQueryParameters"),a.auth=aa.auth,Object(h.b)("wvsQueryParameters",a)),aa.serverVersion&&(w.z7=aa.serverVersion,Object(y.g)("[WebViewer Server] server version: "+w.z7)),aa.serverID?(w.cy=aa.serverID===w.hE&&
w.lC?w.cy+1:0,w.hE=aa.serverID):w.cy=0,w.lC=!1,w.dk.resolve(aa));break;case "health":ia?w.dk.reject(ia):ea(aa,fa,w.dk)&&(aa=aa.unhealthy,w.NO&&aa?Object(y.i)("Server failed health check. Single server mode ignoring check."):!w.S9&&aa&&1>=w.cy&&(w.lC=!0,w.tI().then(function(){w.VD()},function(){w.VD()})));break;case "pdf":aa.url=Object(z.a)(w.bf+"../"+encodeURI(aa.url));ia?w.ie.reject(ia):ea(aa,fa,w.ie)&&w.ie.resolve(aa);break;case "docmod":aa.url=Object(z.a)(w.bf+"../"+encodeURI(aa.url));ia?w.ix[aa.rID].reject(ia):
ea(aa,fa,w.ie)&&w.ix[aa.rID].resolve(aa);break;case "xod":if(ia)this.td&&this.td.Hg()&&this.td.reject(ia),this.cd&&this.cd.Hg()&&this.cd.reject(ia);else if(aa.notFound)aa.noCreate||this.td&&this.td.Hg()&&this.td.resolve(aa),this.cd&&this.cd.Hg()&&this.cd.resolve(aa);else{aa.url&&(aa.url=Object(z.a)(w.bf+"../"+encodeURI(aa.url)));if(!this.cd||this.cd.Uo())this.cd=ka(),this.cd.request={t:"xod",noCreate:!0};this.td||(this.td=ka(),this.td.request={t:"xod"});this.cd.resolve(aa);this.td.resolve(aa)}break;
case "annots":if(ia)w.kf.reject(ia);else if(ea(aa,fa,w.kf)){w.kf.cO();var ha=new XMLHttpRequest;a=w.bf+"../"+encodeURI(aa.url);var da=aa.hasAppearance?Object(z.a)(a+".xodapp"):null;ha.open("GET",Object(z.a)(a));ha.responseType="text";ha.withCredentials=this.um();ha.addEventListener("load",function(){ha.readyState===ha.DONE&&200===ha.status&&w.kf.resolve({$E:ha.response,UH:da})});ha.addEventListener("error",function(){w.kf.reject(ha.statusText+" "+JSON.stringify(ha))});ha.send()}break;case "image":var ma=
this.We[aa.p];ia?ma.promise.reject(ia):ea(aa,fa,ma)&&(ma.result=aa,ma.result.url=Object(z.a)(w.bf+"../"+encodeURI(ma.result.url)),ma.resolve(ma.result));break;case "tiles":ma=aa.rID;a=this.Ge[ma];this.Ge[ma]=null;this.$v.push(ma);if(ia)a.reject(ia);else if(ea(aa,fa,a)){for(ia=0;ia<aa.tiles.length;ia++)aa.tiles[ia]=Object(z.a)(w.bf+"../"+encodeURI(aa.tiles[ia]));a.resolve(aa)}break;case "text":ma=this.bg[aa.p];if(ia)ma.reject(ia);else if(ea(aa,fa,ma)){ma.cO();var ua=new XMLHttpRequest;aa=Object(z.a)(w.bf+
"../"+encodeURI(aa.url));ua.open("GET",aa);ua.withCredentials=this.um();ua.addEventListener("load",function(){ua.readyState===ua.DONE&&200===ua.status&&(ma.result=JSON.parse(ua.response),ma.resolve(ma.result))});ua.addEventListener("error",function(na){ma.reject(ua.statusText+" "+JSON.stringify(na))});ua.send()}break;case "progress":"loading"===aa.t&&w.trigger(b.a.Events.DOCUMENT_LOADING_PROGRESS,[aa.bytes,aa.total])}},IJ:function(){this.zC(this.dk);return this.dk.promise},aY:function(){this.kf||
(this.kf=ka(),this.kf.request={t:"annots"},this.Be(this.kf.request));return this.kf.promise},$x:function(a){this.We[a]||(this.We[a]=ka(),this.We[a].request={t:"image",p:a},this.Be(this.We[a].request));return this.We[a].promise},c4:function(a){this.bg[a]||(this.bg[a]=ka(),this.bg[a].request={t:"text",p:a},this.Be(this.bg[a].request));return this.bg[a].promise},d4:function(a,w,aa,ia){var fa=this.Ge.length;this.$v.length&&(fa=this.$v.pop());this.Ge[fa]=ka();this.Ge[fa].request={t:"tiles",p:a,z:w,r:aa,
size:ia,rID:fa};this.Be(this.Ge[fa].request);return this.Ge[fa].promise},DN:function(){this.ie||(this.ie=ka(),this.ie.request={t:"pdf"},this.TA?this.ie.resolve({url:this.$A}):this.Be(this.ie.request));return this.ie.promise},ZJ:function(a){var w=this,aa=new XMLHttpRequest,ia=Object(z.a)(this.bf+"aul")+"&id="+this.id,fa=new FormData,ha={};a.annots&&(ha.annots="xfdf");a.watermark&&(ha.watermark="png");a.redactions&&(ha.redactions="redact");ha={t:"docmod",reqID:this.a1++,parts:ha};a.print&&(ha.print=
!0);var da=this.wI(ha);fa.append("msg",JSON.stringify(da));return Promise.all([a.annots,a.watermark,a.redactions].map(function(ma){return Promise.resolve(ma)})).then(function(ma){var ua=ma[0],na=ma[1],Aa=ma[2];ua&&fa.append("annots",ua);na&&fa.append("watermark",ma.watermark);Aa&&fa.append("redactions",Aa);w.ix[da.reqID]=ka();aa.open("POST",ia);aa.withCredentials=w.um;ma=new Promise(function(ra,ta){aa.onreadystatechange=function(){4===aa.readyState&&(200===aa.status?ra():ta("An error occurred while sending down annotation data to the server"))}});
aa.send(fa);return ma.then(function(){return w.ix[da.reqID].promise})})},vK:function(){this.cd||(this.cd=ka(),this.cd.request={t:"xod",noCreate:!0},this.Be(this.cd.request));return this.cd.promise},e4:function(){this.td||(this.td=ka(),this.td.request={t:"xod"},this.Be(this.td.request));return this.td.promise},Nk:function(){return!0},request:function(){},$M:function(){},abort:function(){for(var a=0;a<this.Ge.length;a++)this.Ge[a]&&(this.Ge[a].resolve(null),this.Ge[a]=null,this.$v.push(a));this.close()},
gy:function(a){this.Ae=this.Ae||{};this.Ae.headers=a},O$:function(){return this.Ae?Object(ca.omit)(this.Ae.headers,["Cookie","cookie"]):null},Cp:function(a){this.Ae=this.Ae||{};this.Ae.internal=this.Ae.internal||{};this.Ae.internal.withCredentials=a},um:function(){return this.Ae&&this.Ae.internal?this.Ae.internal.withCredentials:null},getFileData:function(){return Promise.reject()}});Object(Ea.a)(oa);Object(f.a)(oa);Object(f.b)(oa);va["default"]=oa},348:function(Ea,va,ba){function oa(y,r,n){function b(e,
h){function z(Aa){a().then(function(ra){da&&!ma?setTimeout(function(){z(Aa)},1):ra.send(JSON.stringify(Aa))})}function x(Aa,ra,ta,sa){var qa=window.createPromiseCapability(),ya=!1,Ba=qa;ia=Aa;fa=ra;ha=ta;aa=null;sa&&(Aa=Object(ea.a)("wvsQueryParameters"),Aa.bcid=Object(ja.h)(8),Object(ea.b)("wvsQueryParameters",Aa));try{Aa=ua?na+"/"+ua:na+"/ws";Aa=Object(ca.a)(Aa);var Ja=new WebSocket(Aa);Ja.onopen=function(){qa.resolve();ya=!0;qa=null;da=!1;w.resolve(Ja);fa&&fa()};Ja.onerror=function(La){da=ma=!0;
qa&&qa.reject(La);aa&&aa.reject()};Ja.onclose=function(){w=window.createPromiseCapability();da=!0;aa||(aa=window.createPromiseCapability());aa.resolve();ha&&ha();ia&&ya&&ia({t:"health",data:{unhealthy:!0,isDead:!0}})};Ja.onmessage=function(La){La&&La.data&&(La=JSON.parse(La.data),La.hb?z({hb:!0}):La.end?close():ia(La))}}catch(La){qa.reject(La),qa=null}return Ba.promise}function a(){da&&ia&&x(ia);return w.promise}var w=window.createPromiseCapability(),aa=null,ia,fa,ha=null,da=!1,ma=!1,ua=h,na=function(Aa){var ra=
Aa.indexOf("://"),ta="ws://";0>ra?ra=0:(5===ra&&(ta="wss://"),ra+=3);var sa=Aa.lastIndexOf("/");0>sa&&(sa=Aa.length);return ta+Aa.slice(ra,sa)}(e);return{send:z,CE:x,hB:function(){return aa?aa.promise:a().then(function(Aa){aa=window.createPromiseCapability();ia=null;Aa.close();return aa.promise})}}}function f(e){var h=e.lastIndexOf("/");0>h&&(h=e.length);return e.slice(0,h)}return window.WebSocket&&!n?b(y,r):function(e,h){function z(Aa){(ha?ha.promise:Promise.resolve(fa)).then(function(ra){var ta=
new XMLHttpRequest,sa=ia?aa+"/"+ia+"pf":aa+"/pf";sa=Object(ca.a)(sa)+"&id="+ra;ra=new FormData;ra.append("data",JSON.stringify(Aa));ta.open("POST",sa);ta.withCredentials=!0;ta.send(ra)})}function x(){fa=0;ha||(ha=window.createPromiseCapability())}function a(){w=new XMLHttpRequest;var Aa=aa+"/pf";Aa+=0!==fa?"?id="+fa+"&uc="+na:"?uc="+na;na++;w.open("GET",Aa,!0);w.withCredentials=!0;w.setRequestHeader("Cache-Control","no-cache");w.setRequestHeader("X-Requested-With","XMLHttpRequest");var ra=w,ta=!1;
w.onreadystatechange=function(){a:if(3<=ra.readyState&&!ta){try{var sa=ra.responseText.length}catch(Ba){Object(ka.g)("caught exception");break a}if(0<sa)try{var qa=ra.responseText.split("\n");for(qa[qa.length-1]&&qa.pop();0<qa.length&&3>qa[qa.length-1].length;)"]"===qa.pop()&&x();0<qa.length&&3>qa[0].length&&qa.shift();for(sa=0;sa<qa.length;++sa)qa[sa].endsWith(",")&&(qa[sa]=qa[sa].substr(0,qa[sa].length-1));0===fa&&0<qa.length&&(fa=JSON.parse(qa.shift()).id,sa=ha,ha=null,sa.resolve(fa));var ya;for(sa=
0;sa<qa.length;++sa)(ya=JSON.parse(qa[sa]))&&ya.end?close():ya&&ya.hb&&ya.id===fa?z({hb:!0}):ua(ya)}catch(Ba){}da||(ta=!0,a())}};w.send()}var w,aa=f(e),ia=h,fa=0,ha=window.createPromiseCapability(),da=!1,ma=null,ua=null,na=0;return{send:z,CE:function(Aa,ra,ta){ua=Aa;ma=ta;da=!1;x();a();ra&&ra();return Promise.resolve()},hB:function(){x();ua=null;da=!0;ma&&ma();w.abort();return Promise.resolve()}}}(y,r)}ba.d(va,"a",function(){return oa});var ka=ba(1),ja=ba(32),ea=ba(37),ca=ba(126)}}]);}).call(this || window)
